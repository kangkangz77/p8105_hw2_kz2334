---
title: "Homework 2"
author: "Kangkang Zhang"
date: "10/2/2018"
output: github_document
---

##Problem 1

Load package tidyverse.
```{r 1.1}
library(tidyverse)
```

Read NYC Transit data and do data cleaning as question required.
```{r 1.2}
transit_data = read_csv("./data/NYC_transit.csv") %>% 
  janitor::clean_names() %>%  
  select(line, station_name, station_latitude, station_longitude,
         starts_with("route"), entry, vending, entrance_type, ada) %>% 
   mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

This dataset is about New York transportation. It contains variables including line, station name / latitude / longitute, routes served, entry, vending, entrance_type and ADA compliance.

Here is the data cleaning step:

1.   clean up variables'names.
1.   retain variables the question mentioned.
1.   convert the entry variable from character to logical.

The dimension of the dataset is (`r dim(transit_data)`).

The data are not tidy. Because some variables, such like the factor that whether a station served for A line, have values appear in different columns among route1 - route11. 

----------------------------

Use distinct function to find out number of distinct stations.
```{r 1.3}
distinct(transit_data, line, station_name)
```
There are 465 distinct stations.

----------------------------

Use filter and distinct to find out number of stations which are ADA compliant.
```{r 1.4}
transit_data %>% 
  filter(ada == TRUE) %>% 
  distinct(line, station_name, ada)
```
82 stations are ADA compliant.

----------------------------

Use filter to find out proportion of station entrances / exits without vending allow entrance.
```{r 1.5}
entry_data = filter(transit_data, vending == "NO" & entry == TRUE) 
dim(entry_data)[1] / dim(transit_data)[1]
```
There are 3.69% station entrances / exits without vending allow entrance.

----------------------------

Reformat the dataset with distinct route name and route number.
```{r 1.6}
route_data = gather(transit_data, key = route_number, value = route_name, route1:route11) %>% 
  filter(is.na(route_name) == FALSE)
```

----------------------------

Find out the number of distinct stations serve the A train and the number of ADA compliant of them.
```{r 1.7}
route_data %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name, route_name)
```
60 stations serve the A train.

----------------------------

```{r 1.8}
route_data %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name, route_name, ada) %>% 
  filter(ada == TRUE)
```
17 stations which serve the A train are ADA compliant.

----------------------------

##Problem 2